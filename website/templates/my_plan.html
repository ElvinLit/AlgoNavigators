{% extends "base.html" %}

{% block title %}Planner Page{% endblock %}

{% block content %}
<div class="content-container">
    {% if not final_plan_empty %}
    <div class="boarding-pass">
        <div class="flight-header"><strong>Departure Flight</strong></div>
        <div class="flight-details">
            <div class="flight-info">
                <div class="flight-airline">Airline : {{ user.final_plan[0].first_airline }}</div>
                <div class="flight-departure">
                    <span>Depart: {{ user.final_plan[0].first_departure_airport }}</span> <span>Time: {{
                        user.final_plan[0].first_departure_time }}</span>
                </div>
                <div class="flight-arrival">
                    <span>Arrive: {{ user.final_plan[0].first_arrival_airport }}</span> <span>Time: {{
                        user.final_plan[0].first_arrival_time }}</span>
                </div>
            </div>
            <div class="flight-meta">
                <div class="flight-cost">Cost: ${{ user.final_plan[0].first_cost }}</div>
                <div class="flight-duration">Duration: {{ user.final_plan[0].first_duration }}</div>
                <div class="flight-date">Date: {{ user.final_plan[0].departure_date }}</div>
            </div>
            <div class="flight-url"><a href="{{ user.final_plan[0].first_flight_link }}" target="_blank">View Flight</a></div>
        </div>
    </div>

    <!-- Return Flight Boarding Pass -->
    <div class="boarding-pass">
        <div class="flight-header"><strong>Returning Flight</strong></div>
        <div class="flight-details">
            <div class="flight-info">
                <div class="flight-airline">Airline: {{ user.final_plan[0].second_airline }}</div>
                <div class="flight-departure">
                    <span>Depart: {{ user.final_plan[0].second_departure_airport }}</span> <span>Time: {{
                        user.final_plan[0].second_departure_time }}</span>
                </div>
                <div class="flight-arrival">
                    <span>Arrive: {{ user.final_plan[0].second_arrival_airport }}</span> <span>Time: {{
                        user.final_plan[0].second_arrival_time }}</span>
                </div>
            </div>
            <div class="flight-meta">
                <div class="flight-cost">Cost: ${{ user.final_plan[0].second_cost }}</div>
                <div class="flight-duration">Duration: {{ user.final_plan[0].second_duration }}</div>
                <div class="flight-date">Date: {{ user.final_plan[0].return_date }}</div>
            </div>
            <div class="flight-url"><a href="{{ user.final_plan[0].second_flight_link }}" target="_blank">View Flight</a></div>
        </div>
    </div>

    <!-- Additional Details: Hotel, Activities, and Restaurants -->
    <div class="details-card">
        <h3><strong>Itinerary</strong></h3>
        <div class="hotel-section">
            <div>
                <div class="hotel-name"><strong>Hotel:</strong> {{ user.final_plan[0].hotel_location }}</div>
                <div class="hotel-location"><strong>Price:</strong> ${{ user.final_plan[0].hotel_price }}</div>
                <div class="hotel-rating"><strong>Rating:</strong> {{ user.final_plan[0].hotel_rating }}</div>
            </div>
            <div class="hotel-url"><a href="{{ user.final_plan[0].hotel_link }}" target="_blank">View Hotel</a></div>
        </div>        
        <hr>
        <div class="activity-section">
            <strong>Activities: </strong> {{ user.final_plan[0].activities }}
        </div>
        <hr>
        <div class="restaurant-section">
            <strong>Restaurants: </strong> {{ user.final_plan[0].restaurant }}
        </div>
    </div>
    {% else %}
    <div class="empty-plan-card">
        <h2>Your Plan Is Empty</h2>
        <p>Go to our chat page to create your itinerary!</p>
        <a href="/chat" class="chat-button">Go to Chat</a>
    </div>
    {% endif %}
</div>
{% endblock %}