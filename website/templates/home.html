{% extends "base.html" %}

{% block title %}Home{% endblock %}

{% block content %}
    <h1 align="center" style="margin-block: 10px;">AlgoNavigator</h1>

    <!-- Chatbox -->
    <style>
        .chat-entry {
            margin-top: 4px;
            margin-bottom: 4px;
            margin-left: 4px;
            margin-right: 4px;
            border: 2px solid white; 
            padding: 15px;
            border-radius: 15px; /* Adjust the value to control the roundness of the edges */
            background-color: #394867;
        }
    
        #chatbox {
            height: 50vh;
            width: 100%;
            border: 3px solid white;
            overflow: auto;
            background-color: transparent;
            color: white;
            border-radius: 20px; /* Adjust the value to control the roundness of the edges */
        }
    </style>
    
    <div id="chatbox">
        {% for note in user.notes %}
            <div class="chat-entry">
                {{ note.data }}
                <button type="button" class="close" onClick="deleteNote({{ note.id }})">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
        {% endfor %}
    </div>

    <script>
        // Automatically scroll the chatbox to the bottom when the page is loaded or reloaded
        document.addEventListener('DOMContentLoaded', function() {
            var chatbox = document.getElementById('chatbox');
            chatbox.scrollTop = chatbox.scrollHeight;
        });
    </script>

    <style>
        /* Styling the scrollbar for webkit-based browsers */
        #chatbox::-webkit-scrollbar {
        width: 0px; /* Set the width of the scrollbar */
        }
    </style>

    <!-- Message Box & Button -->
    <style>
        /* Apply the same border-radius to the form elements */
        #userInput textarea,
        .btn-custom-outline {
            border-radius: 15px; /* Adjust the value to control the roundness of the edges */
        }
    </style>
    
    <form method="POST">
        <div id="userInput" style="margin-top: 10px;">
            <textarea name="note" id="userMessage" placeholder="Type a message..." class="form-control" style="background-color: transparent; color: white; border: 3px solid white; border-radius: 15px;"></textarea>
            <center>
                <style>
                    /* Default outline button styles */
                    .btn-custom-outline {
                        margin-top: 10px;
                        background-color: transparent;
                        color: white;
                        border: 2px solid white;
                    }
                    /* Button styles on hover */
                    .btn-custom-outline:hover {
                        border-color: #00ffa2; /* Change the border color on hover */
                        color: #00ffa2; /* Change the text color on hover */
                    }
                </style>
                <button type="submit" class="btn btn-custom-outline">Send</button>
                <span style="margin-left: 5px;"></span> <!-- Add a small space here -->
                <button type="button" class="btn btn-custom-outline" onClick="startNewConversation()">Start New Conversation</button>
            </center>
        </div>
    </form>
    
    
    
    <script>
        // Function to delete all notes and start new conversation
        function startNewConversation() {
            fetch("/delete-all-notes", {
                method: "POST",
                body: JSON.stringify({}),
            }).then((_res) => {
                window.location.href = "/";
            });
        }
    </script>
    

    <form action="{{ url_for('chat.test') }}" method="get">
        <button type="submit">Click me!</button>
    </form>




{% endblock %}
